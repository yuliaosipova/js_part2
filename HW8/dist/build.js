(()=>{"use strict";var r={473:r=>{r.exports=body-parser},127:r=>{r.exports=express},747:r=>{r.exports=fs}},e={};function s(t){var o=e[t];if(void 0!==o)return o.exports;var n=e[t]={exports:{}};return r[t](n,n.exports,s),n.exports}(()=>{const r=s(747),e=s(127),t=s(473),o=e();o.use(e.static(".")),o.use(t.json()),o.get("/catalog",((e,s)=>r.readFile("./catalog.json",((r,e)=>{if(r)throw Error(r);s.send(e)})))),o.get("/basket",((e,s)=>r.readFile("./cart.json",((r,e)=>{if(r)throw Error(r);s.send(e)})))),o.post("/removeFromCart",((e,s)=>r.readFile("cart.json","utf8",((t,o)=>{var n=JSON.parse(o);const a=e.body;var i=n.findIndex((r=>r.product_name===a.product_name));i>-1?(n=[...n.slice(0,i),...n.slice(i+1)],r.writeFile("cart.json",JSON.stringify(n),(r=>{r?s.send('{"result": 1, "error": err}'):s.send('{"result": 0}')}))):s.send('{"result": 1}')})))),o.post("/addToCart",((e,s)=>r.readFile("cart.json","utf8",((t,o)=>{if(t)s.send('{"result": 0}');else{const t=JSON.parse(o),n=e.body;t.push(n),r.writeFile("cart.json",JSON.stringify(t),(r=>{r?s.send('{"result": 1, "error": err}'):s.send('{"result": 0}')}))}})))),o.listen(4200,(()=>{console.log("express server started on 4200 port")}))})()})();